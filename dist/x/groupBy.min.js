/**
 * rubico v1.9.6
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.groupBy=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=()=>new Map,t=n=>null!=n&&"function"==typeof n.then,e=Symbol.for("placeholder"),o=function(n,t,o,r){return t==e?((n,t,e)=>function(o){return n(o,t,e)})(n,o,r):o==e?((n,t,e)=>function(o){return n(t,o,e)})(n,t,r):((n,t,e)=>function(o){return n(t,e,o)})(n,t,o)},r=function(n,t,o,r){return t==e?((n,t,e)=>function(...o){return n(o,t,e)})(n,o,r):o==e?((n,t,e)=>function(...o){return n(t,o,e)})(n,t,r):((n,t,e)=>function(...o){return n(t,e,o)})(n,t,o)},u=Array.isArray,c=(Object.values,Object.prototype.toString),f=n=>c.call(n),i=async function(n,e,o){let r=n.next();if(r.done)return o;for(;!r.done;)o=e(o,r.value),t(o)&&(o=await o),r=n.next();return o},a=function(n,r,u){let c=n.next();if(c.done)return u;for(void 0===u&&(u=c.value,c=n.next());!c.done;){if(u=r(u,c.value),t(u))return u.then(o(i,n,r,e));c=n.next()}return u},s=async function(n,t,e){let o=await n.next();if(o.done)return e;for(void 0===e&&(e=o.value,o=await n.next());!o.done;)e=await t(e,o.value),o=await n.next();return e},l=Symbol.iterator,y=Symbol.asyncIterator,p=function(n,t,o){return t==e?((n,t)=>function(e){return n(e,t)})(n,o):((n,t)=>function(e){return n(t,e)})(n,t)},d=function(n,t,o,r,u){return t==e?((n,t,e,o)=>function(r){return n(r,t,e,o)})(n,o,r,u):o==e?((n,t,e,o)=>function(r){return n(t,r,e,o)})(n,t,r,u):r==e?((n,t,e,o)=>function(r){return n(t,e,r,o)})(n,t,o,u):((n,t,e,o)=>function(r){return n(t,e,o,r)})(n,t,o,r)},h=async function(n,e,o,r){const u=n.length;for(;++r<u;)o=e(o,n[r],r,n),t(o)&&(o=await o);return o},v=Object.keys,b=async function(n,e,o,r,u){const c=r.length;for(;++u<c;){const c=r[u];o=e(o,n[c],c,n),t(o)&&(o=await o)}return o},g=async function(n,e,o,r){for(const[u,c]of r)o=e(o,c,u,n),t(o)&&(o=await o);return o},x=(n,t)=>function(...e){return t(n(...e))},w=(n,o)=>function(r,u){const c=n(r,u);return t(c)?c.then(p(o,e,u)):o(c,u)},j=function(n,c,i){const m=n[0];return u(m)?function(n,o,r){const u=n.length;let c=-1;for(void 0===r&&(r=n[++c]);++c<u;)if(r=o(r,n[c],c,n),t(r))return r.then(d(h,n,o,e,c));return r}(m,c,i):"function"==typeof m?"[object GeneratorFunction]"==f(m)?((n,t,r)=>x(n,o(a,e,t,r)))(m,c,i):(n=>"[object AsyncGeneratorFunction]"==f(n))(m)?((n,t,r)=>x(n,o(s,e,t,r)))(m,c,i):r(j,e,1==n.length?w(c,m):n.reduce(w,c),i):null==m?void 0===i?p(c,m,e):c(i,m):m.constructor==Map?function(n,o,r){const u=n.entries();if(void 0===r){const n=u.next();if(n.done)return r;r=n.value[1]}for(const[c,f]of u)if(r=o(r,f,c,n),t(r))return r.then(d(g,n,o,e,u));return r}(m,c,i):"function"==typeof m[l]?a(m[l](),c,i):"function"==typeof m[y]?s(m[y](),c,i):"function"==typeof m.reduce?m.reduce(c,i):"function"==typeof m.chain?m.chain(p(c,i,e)):"function"==typeof m.flatMap?m.flatMap(p(c,i,e)):m.constructor==Object?function(n,o,r){const u=v(n),c=u.length;let f=-1;for(void 0===r&&(r=n[u[++f]]);++f<c;){const c=u[f];if(r=o(r,n[c],c,n),t(r))return r.then((i=b,s=o,l=e,y=u,p=f,(a=n)==e?((n,t,e,o,r)=>function(u){return n(u,t,e,o,r)})(i,s,l,y,p):s==e?((n,t,e,o,r)=>function(u){return n(t,u,e,o,r)})(i,a,l,y,p):l==e?((n,t,e,o,r)=>function(u){return n(t,e,u,o,r)})(i,a,s,y,p):y==e?((n,t,e,o,r)=>function(u){return n(t,e,o,u,r)})(i,a,s,l,p):((n,t,e,o,r)=>function(u){return n(t,e,o,r,u)})(i,a,s,l,y)))}var i,a,s,l,y,p;return r}(m,c,i):void 0===i?p(c,m,e):c(i,m)},m=function(...n){if("function"!=typeof n[0]){const t=n[1],e=n[2];return j([n[0]],t,"function"==typeof e?e(n[0]):e)}const u=n[0],c=n[1];return"function"==typeof c?function(...n){const r=c(...n);return t(r)?r.then(o(j,n,u,e)):j(n,u,r)}:r(j,e,u,c)},M=function(n,t,e){const o=n.get(t);return null==o?n.set(t,[e]):o.push(e),n};return r=>{return m("function"==typeof r?(c=r,function(n,r){const u=c(r);return t(u)?u.then(o(M,n,e,r)):M(n,u,r)}):(u=r,function(n,t){return M(n,t[u],t)}),n);var u,c}}());
